<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced Reading and Writing for SQLite Databases • readwritesqlite</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Enhanced Reading and Writing for SQLite Databases">
<meta property="og:description" content="
  Preserves time zones (for POSIXct columns), 
  projections (for sfc columns), units (for unit columns), 
  levels (for factors and ordered factors) and classes for 
  logical, Date and hms columns.
  It also logs changes to tables and provides more informative error messages.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">readwritesqlite</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/using-readwritesqlite.html">Using readwritesqlite</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

<div id="readwritesqlite" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#readwritesqlite" class="anchor"></a>readwritesqlite</h1></div>
<p>SQLite databases are a simple, powerful way to validate, query and store related data frames particularly when used with the RSQLite package. However, current solutions do not preserve (or check) meta data, log changes or provide particularly useful error messages.</p>
<p><code>readwritesqlite</code> is an R package that by default</p>
<ul>
<li>preserves (and subsequently checks) the following metadata
<ul>
<li>the class for logical, Date and hms columns</li>
<li>the levels for factors and ordered factors</li>
<li>the time zone for POSIXct columns</li>
<li>the units for unit columns</li>
<li>the projection for sfc columns</li>
<li>the sf column for sf objects</li>
</ul>
</li>
<li>logs
<ul>
<li>the date time</li>
<li>system user</li>
<li>table creation and data insertion or deletion</li>
</ul>
</li>
<li>provides informative error messages if
<ul>
<li>columns are missing</li>
<li>NOT NULL columns contain missing values</li>
<li>PRIMARY KEY column values in the input data are not unique</li>
</ul>
</li>
</ul>
<p><code>readwritesqlite</code> also allows the user to</p>
<ul>
<li>write environments (or named lists) of data frames (useful for populating databases)</li>
<li>delete existing data (and meta data) before writing (useful for converting an existing database)</li>
<li>replace existing data which causes unique or primary key conflicts (useful for updating databases)</li>
<li>confirm data can be written without committing any changes (useful for checking data)</li>
<li>check all existing tables are written to (useful for data transfers)</li>
<li>rearrange and add levels for factors and add levels for ordered factors</li>
<li>initialize the meta data for a new table by writing a data frame or sf data frame with no rows but logical, Date, factor, ordered, POSIXct, sfc or unit columns (useful for creating an empty database with additional informative checks)</li>
</ul>
<p><code>readwritesqlite</code> provides all these features through its <code><a href="reference/rws_write.html">rws_write()</a></code> and <code><a href="reference/rws_read.html">rws_read()</a></code> functions.</p>
<p>The <code><a href="reference/rws_query.html">rws_query()</a></code> function allows the user to pass a SQL query. By default, the metadata (except the setting of the sf column) is, if unambiguously defined, preserved for each column in the final query. To enable this functionality the user should ensure that a) columns in tables which will be referenced in the same query should have different names or identical metadata and b) column names in the final query should match those in the referenced base tables.</p>
<p>The init, meta and log data are stored in separate tables from the main data which means that they do not interfere with other ways of interacting with a SQLite database.</p>
<div id="demonstration" class="section level2">
<h2 class="hasAnchor">
<a href="#demonstration" class="anchor"></a>Demonstration</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(units)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; udunits system database from /Library/Frameworks/R.framework/Versions/3.6/Resources/library/units/share/udunits</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sf)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; Linking to GEOS 3.6.1, GDAL 2.1.3, PROJ 4.9.3</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(readwritesqlite)</a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9">conn &lt;-<span class="st"> </span><span class="kw"><a href="reference/rws_connect.html">rws_connect</a></span>()</a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11">rws_data</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt; Simple feature collection with 3 features and 6 fields</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt; bbox:           xmin: 0 ymin: 0 xmax: 1 ymax: 1</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">#&gt; # A tibble: 3 x 7</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#&gt;   logical date       factor ordered posixct             units    geometry</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">#&gt;   &lt;lgl&gt;   &lt;date&gt;     &lt;fct&gt;  &lt;ord&gt;   &lt;dttm&gt;                [m] &lt;POINT [°]&gt;</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">#&gt; 1 TRUE    2000-01-01 x      x       2001-01-02 03:04:05  10.0       (0 1)</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co">#&gt; 2 FALSE   2001-02-03 y      y       2006-07-08 09:10:11  11.5       (1 0)</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co">#&gt; 3 NA      NA         &lt;NA&gt;   &lt;NA&gt;    NA                     NA       (1 1)</span></a>
<a class="sourceLine" id="cb1-24" title="24"></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw"><a href="reference/rws_write.html">rws_write</a></span>(rws_data, <span class="dt">exists =</span> <span class="ot">FALSE</span>, <span class="dt">conn =</span> conn)</a>
<a class="sourceLine" id="cb1-26" title="26"></a>
<a class="sourceLine" id="cb1-27" title="27">DBI<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/DBI/topics/dbReadTable">dbReadTable</a></span>(conn, <span class="st">"rws_data"</span>)</a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co">#&gt;   logical  date factor ordered    posixct units   geometry</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="co">#&gt; 1       1 10957      x       x  978433445  10.0 blob[21 B]</span></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co">#&gt; 2       0 11356      y       y 1152378611  11.5 blob[21 B]</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co">#&gt; 3      NA    NA   &lt;NA&gt;    &lt;NA&gt;         NA    NA blob[21 B]</span></a>
<a class="sourceLine" id="cb1-32" title="32"></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="kw"><a href="reference/rws_read_table.html">rws_read_table</a></span>(<span class="st">"rws_data"</span>, <span class="dt">conn =</span> conn)</a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co">#&gt; Simple feature collection with 3 features and 6 fields</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="co">#&gt; bbox:           xmin: 0 ymin: 0 xmax: 1 ymax: 1</span></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co">#&gt; epsg (SRID):    4326</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="co">#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="co">#&gt; # A tibble: 3 x 7</span></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="co">#&gt;   logical date       factor ordered posixct             units    geometry</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co">#&gt;   &lt;lgl&gt;   &lt;date&gt;     &lt;fct&gt;  &lt;ord&gt;   &lt;dttm&gt;                [m] &lt;POINT [°]&gt;</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co">#&gt; 1 TRUE    2000-01-01 x      x       2001-01-02 03:04:05  10.0       (0 1)</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co">#&gt; 2 FALSE   2001-02-03 y      y       2006-07-08 09:10:11  11.5       (1 0)</span></a>
<a class="sourceLine" id="cb1-45" title="45"><span class="co">#&gt; 3 NA      NA         &lt;NA&gt;   &lt;NA&gt;    NA                     NA       (1 1)</span></a>
<a class="sourceLine" id="cb1-46" title="46"></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="kw"><a href="reference/rws_disconnect.html">rws_disconnect</a></span>(conn)</a></code></pre></div>
</div>
<div id="information" class="section level2">
<h2 class="hasAnchor">
<a href="#information" class="anchor"></a>Information</h2>
<p>For more information on using <code>readwritesqlite</code> see the vignette <a href="https://poissonconsulting.github.io/readwritesqlite/articles/using-readwritesqlite.html">using-readwritesqlite</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install the latest official release from <a href="https://CRAN.R-project.org/package=readwritesqlite">CRAN</a></p>
<pre><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("readwritesqlite")</a></code></pre>
<p>To install the latest development version from the Poisson drat <a href="https://github.com/poissonconsulting/drat">repository</a></p>
<pre><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("readwritesqlite", repos = "http://poissonconsulting.github.io/drat")</a></code></pre>
</div>
<div id="contribution" class="section level2">
<h2 class="hasAnchor">
<a href="#contribution" class="anchor"></a>Contribution</h2>
<p>Please report any <a href="https://github.com/poissonconsulting/readwritesqlite/issues">issues</a>.</p>
<p><a href="https://github.com/poissonconsulting/readwritesqlite/pulls">Pull requests</a> are always welcome.</p>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joe Thorley <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7683-4592" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.com/poissonconsulting/readwritesqlite"><img src="https://travis-ci.com/poissonconsulting/readwritesqlite.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/poissonconsulting/readwritesqlite"><img src="https://ci.appveyor.com/api/projects/status/github/poissonconsulting/readwritesqlite?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/poissonconsulting/readwritesqlite?branch=master"><img src="https://codecov.io/gh/poissonconsulting/readwritesqlite/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License: MIT"></a></li>
<li><a href="https://cran.r-project.org/package=readwritesqlite"><img src="https://www.r-pkg.org/badges/version/readwritesqlite" alt="CRAN status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joe Thorley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
